package com.dm_centre.sa.samsungattestationapp;import android.database.Cursor;import android.support.v7.app.ActionBarActivity;import android.os.Bundle;import android.util.Log;import android.view.ContextMenu;import android.view.Gravity;import android.view.Menu;import android.view.MenuInflater;import android.view.MenuItem;import android.view.View;import android.widget.AdapterView;import android.widget.EditText;import android.widget.ListView;import android.widget.SimpleCursorAdapter;import android.widget.Toast;import java.util.ArrayList;import java.util.List;import static android.database.DatabaseUtils.dumpCursorToString;public class MainActivity extends ActionBarActivity {    String[] from = new String[] { DBHelperClass.COLUMN_NAME, DBHelperClass.COLUMN_COMMENT };    int[] to = new int[] { android.R.id.text1, android.R.id.text2 };    SimpleCursorAdapter scAdapter;    private DBHelperClass dbHelper;    private long updateId;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        dbHelper = new DBHelperClass(this);        ListView lvData = (ListView) findViewById(R.id.lvData);        registerForContextMenu(lvData);        scAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_2, null, from, to,0);        lvData.setAdapter(scAdapter);        showList();    }    @Override    protected void onStop() {        super.onStop();        scAdapter.swapCursor(null);    }//--------------------------------------------------------------------------------------------------    public void showList(){        scAdapter.swapCursor((Cursor) dbHelper.getAllComment());    }//--------------------------------------------------------------------------------------------------    public void onClickAdd(View view){        EditText nameView = (EditText) findViewById(R.id.addNameInput);        String name = nameView.getText().toString().trim();        EditText commentView = (EditText) findViewById(R.id.editText);        String comment = commentView.getText().toString().trim();        dbHelper.addComment(new dataModelClass(name, comment));        showList();        ((EditText) findViewById(R.id.addNameInput)).setText("");        ((EditText) findViewById(R.id.editText)).setText("");    }//--------------------------------------------------------------------------------------------------    public void showToast() {        //create my toast        Toast toast = Toast.makeText(getApplicationContext(),                "данные успешно изменены",                Toast.LENGTH_SHORT);        toast.setGravity(Gravity.CENTER, 0, 0);        toast.show();    }//--------------------------------------------------------------------------------------------------    public void onClickUpdate(View view){        EditText nameView = (EditText) findViewById(R.id.addNameInput);        String name = nameView.getText().toString().trim();        EditText commentView = (EditText) findViewById(R.id.editText);        String comment = commentView.getText().toString().trim();        dbHelper.updateComment(new dataModelClass(name, comment), this.updateId);        showList();        findViewById(R.id.updateBtn).setVisibility(View.INVISIBLE);        findViewById(R.id.AddButton).setVisibility(View.VISIBLE);        ((EditText) findViewById(R.id.addNameInput)).setText("");        ((EditText) findViewById(R.id.editText)).setText("");        showToast();    }//--------------------------------------------------------------------------------------------------    @Override    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo) {        super.onCreateContextMenu(menu, v, menuInfo);        MenuInflater inflater = getMenuInflater();        inflater.inflate(R.menu.menu_main_context, menu);        menu.setHeaderTitle("Запись");    }//--------------------------------------------------------------------------------------------------    @Override    public boolean onContextItemSelected(MenuItem item) {        AdapterView.AdapterContextMenuInfo info =                (AdapterView.AdapterContextMenuInfo) item.getMenuInfo();        switch (item.getItemId()) {            case R.id.action_delete:                dbHelper.deleteComment(info.id);                showList();                return true;            case R.id.action_edit:                //updateBtn.                findViewById(R.id.updateBtn).setVisibility(View.VISIBLE);                findViewById(R.id.AddButton).setVisibility(View.INVISIBLE);                Cursor itemObj = dbHelper.getOneComment(info.id);                this.updateId = info.id;                ((EditText) findViewById(R.id.addNameInput)).setText(itemObj.getString(itemObj.getColumnIndex("name")));                ((EditText) findViewById(R.id.editText)).setText(itemObj.getString(itemObj.getColumnIndex("comment")));                return true;            default:                return super.onContextItemSelected(item);        }    }}